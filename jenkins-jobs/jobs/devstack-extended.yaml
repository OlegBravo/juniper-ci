- job-template:
    name: devstack-{project}
    description: "Deploys devstack with {project} and run projects' tests"
    defaults: global
    node: master
    properties:
      - build-discarder
    scm:
      - juniper-ci
    triggers:
      - timed: "{time}"
    builders:
      - shell: |
          #!/bin/bash -e
          ./juniper-ci/devstack/run.sh devstack-{project}  {concurrency}
    publishers:
      - junit:
          results: test_result.xml

- project:
   name: devstack-extended
   project:
    - ec2:
       concurrency: 2
       time: "0 5 * * 1"
       tests: ec2api_tempest_plugin
   jobs:
    - 'devstack-{project}'

#- project:
#   name: devstack-extended
#   project:
#    - gce:
#       concurrency: 1
#       time: "0 3 * * 1"
#       tests: gceapi.tests.functional
#   jobs:
#    - 'devstack-{project}'
